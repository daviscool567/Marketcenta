{"remainingRequest":"/Users/mac/Sites/maeketcentamobile/node_modules/babel-loader/lib/index.js!/Users/mac/Sites/maeketcentamobile/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/mac/Sites/maeketcentamobile/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/mac/Sites/maeketcentamobile/src/views/Refer.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/mac/Sites/maeketcentamobile/src/views/Refer.vue","mtime":1640508006306},{"path":"/Users/mac/Sites/maeketcentamobile/babel.config.js","mtime":1638646982756},{"path":"/Users/mac/Sites/maeketcentamobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/maeketcentamobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/mac/Sites/maeketcentamobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mac/Sites/maeketcentamobile/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZGVmaW5lQ29tcG9uZW50IH0gZnJvbSAndnVlJzsKaW1wb3J0IHsgSW9uQ2FyZCwgSW9uUGFnZSB9IGZyb20gJ0Bpb25pYy92dWUnOwppbXBvcnQgQmFzZUxheW91dCBmcm9tICdAL2NvbXBvbmVudHMvQmFzZUxheW91dCc7CmltcG9ydCBheGlvcyBmcm9tICJheGlvcyI7CmltcG9ydCB7IG1hcEFjdGlvbnMsIG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOwppbXBvcnQgeyBjb3B5VGV4dCB9IGZyb20gJ3Z1ZTMtY2xpcGJvYXJkJzsKZXhwb3J0IGRlZmF1bHQgZGVmaW5lQ29tcG9uZW50KHsKICBuYW1lOiAnQWNjb3VudCcsCiAgY29tcG9uZW50czogewogICAgSW9uQ2FyZCwKICAgIEJhc2VMYXlvdXQsCiAgICBJb25QYWdlCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJlZmVycmVkOiB7fQogICAgfTsKICB9LAoKICBjb21wdXRlZDogbWFwR2V0dGVycyhbImF1dGhfdG9rZW4iLCAiYXV0aF91c2VyIl0pLAoKICBtb3VudGVkKCkgewogICAgdGhpcy5mZXRjaFJlZmVycmVkVXNlcnMoKTsKICB9LAoKICBtZXRob2RzOiB7IC4uLm1hcEFjdGlvbnMoWydnZXRBdXRoRGF0YSddKSwKCiAgICBmZXRjaFJlZmVycmVkVXNlcnMoKSB7CiAgICAgIGNvbnN0IHVzZXJJZCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuaWQ7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIGF4aW9zLmdldCh0aGlzLmR5bmFtaWNfYXV0aF9yb3V0ZSgidXNlci9yZWZlcnJlZC9mZXRjaC8iICsgdXNlcklkKSwgewogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgIGF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmF1dGhfdG9rZW59YAogICAgICAgIH0KICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMucmVmZXJyZWQgPSByZXMuZGF0YTsKICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMudG9rZW5FeHBpcmVkKGVycm9yKTsKICAgICAgfSkuZmluYWxseSgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKCiAgICBmb3JtYXREYXRlKGRhdGUpIHsKICAgICAgcmV0dXJuIG1vbWVudChkYXRlKS5mb3JtYXQoIkQtTU0tWVlZWSIpOwogICAgfSwKCiAgICBkb0NvcHkoKSB7CiAgICAgIGNvbnN0IHRleHQgPSB0aGlzLmF1dGhfdXNlci5yZWZlcnJhbF9saW5rOwogICAgICBjb3B5VGV4dCh0ZXh0LCB1bmRlZmluZWQsIGVycm9yID0+IHsKICAgICAgICBpZiAoZXJyb3IpIHsKICAgICAgICAgIHRoaXMub3BlblRvYXN0KCIgY2Fubm90IGNvcHkgcmVmZXJyYWwgbGluayIsICJkYW5nZXIiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5vcGVuVG9hc3QoIlJlZmVycmFsIExpbmsgQ29waWVkIHRvIGNsaXBib2FyZCIsICJzdWNjZXNzIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgfQp9KTs="},{"version":3,"sources":["/Users/mac/Sites/maeketcentamobile/src/views/Refer.vue"],"names":[],"mappings":"AA2DA,SAAS,eAAT,QAAgC,KAAhC;AACA,SAAU,OAAV,EAAmB,OAAnB,QAAkC,YAAlC;AACA,OAAO,UAAP,MAAuB,yBAAvB;AACA,OAAO,KAAP,MAAkB,OAAlB;AACA,SAAS,UAAT,EAAqB,UAArB,QAAuC,MAAvC;AACA,OAAO,MAAP,MAAmB,QAAnB;AACA,SAAS,QAAT,QAAyB,gBAAzB;AAEA,eAAe,eAAe,CAAC;AAC3B,EAAA,IAAI,EAAE,SADqB;AAE3B,EAAA,UAAU,EAAE;AACR,IAAA,OADQ;AAER,IAAA,UAFQ;AAGR,IAAA;AAHQ,GAFe;;AAO3B,EAAA,IAAI,GAAG;AACH,WAAO;AACH,MAAA,QAAQ,EAAE;AADP,KAAP;AAGH,GAX0B;;AAY3B,EAAA,QAAQ,EAAE,UAAU,CAAC,CAAC,YAAD,EAAe,WAAf,CAAD,CAZO;;AAa3B,EAAA,OAAO,GAAG;AACR,SAAK,kBAAL;AACD,GAf0B;;AAgB3B,EAAA,OAAO,EAAE,EACL,GAAG,UAAU,CAAC,CAAC,aAAD,CAAD,CADR;;AAEL,IAAA,kBAAkB,GAAG;AACjB,YAAM,MAAK,GAAI,KAAK,MAAL,CAAY,KAAZ,CAAkB,IAAlB,CAAuB,EAAtC;AACA,WAAK,OAAL,GAAe,IAAf;AACA,MAAA,KAAI,CACC,GADL,CACS,KAAK,kBAAL,CAAwB,yBAAyB,MAAjD,CADT,EACmE;AAC/D,QAAA,OAAO,EAAE;AACL,UAAA,aAAa,EAAG,UAAS,KAAK,UAAW;AADpC;AADsD,OADnE,EAMK,IANL,CAMW,GAAD,IAAS;AACf,aAAK,QAAL,GAAgB,GAAG,CAAC,IAApB;AACC,OARL,EASK,KATL,CASY,KAAD,IAAW;AAClB,aAAK,YAAL,CAAkB,KAAlB;AACC,OAXL,EAYK,OAZL,CAYa,MAAM;AACf,aAAK,OAAL,GAAe,KAAf;AACC,OAdL;AAeH,KApBI;;AAqBL,IAAA,UAAU,CAAC,IAAD,EAAO;AACb,aAAO,MAAM,CAAC,IAAD,CAAN,CAAa,MAAb,CAAoB,WAApB,CAAP;AACH,KAvBI;;AAwBL,IAAA,MAAM,GAAG;AACL,YAAM,IAAG,GAAI,KAAK,SAAL,CAAe,aAA5B;AACA,MAAA,QAAQ,CAAC,IAAD,EAAO,SAAP,EAAmB,KAAD,IAAW;AACjC,YAAI,KAAJ,EAAW;AACP,eAAK,SAAL,CAAe,4BAAf,EAA6C,QAA7C;AACJ,SAFA,MAEO;AACH,eAAK,SAAL,CAAe,mCAAf,EAAoD,SAApD;AACJ;AACH,OANO,CAAR;AAOH;;AAjCI;AAhBkB,CAAD,CAA9B","sourcesContent":["<template>\r\n    <ion-page>\r\n      <BaseLayout>\r\n        <div class=\"refer\">\r\n            <ion-card class=\"card ion-padding\">\r\n                <h6 style=\"margin-bottom: 0 !important\" class=\"overview\">REFER & EARN</h6>\r\n                <div>\r\n                    <div class=\"text-center refer-content\">\r\n                        <img\r\n                            :src=\"auth_user.avatar\"\r\n                            class=\"img-fluid rounded-circle\"\r\n                            width=\"150\"\r\n                        />\r\n                        <h5 style=\"margin-bottom: 0.5rem !important; margin-top: 0 !important; \r\n                            font-size: 1.25rem; color: #222222; line-height: 1.2; font-weight: 500\">Referral Code\r\n                        </h5>\r\n                        <h2>{{ auth_user.referral_code }}</h2>\r\n                        <p class=\"mb-3\">\r\n                            Invite friends with this referral code and earn\r\n                            <span class=\"refer-prize\">&#8358;1500</span>\r\n                        </p>\r\n                        <div class=\"alert alert-info d-flex\">\r\n                            <span class=\"ref-link\">\r\n                                {{ auth_user.referral_link }}\r\n                            </span>\r\n                            <div\r\n                                class=\"ml-auto align-self-center refer_icon\"\r\n                                style=\"cursor: pointer\"\r\n                            >\r\n                                <i class=\"mdi mdi-content-copy\" @click=\"doCopy\"></i>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <div class=\"reffered\" v-if=\"referred.length != ''\">\r\n                        <h6>Referred Users ({{ referred.length }})</h6>\r\n                        <hr />\r\n                        <div class=\"d-flex mt-3 mb-2\" v-for=\"(ref, i) in referred\" :key=\"i\">\r\n                        <img :src=\"ref.avatar\" alt=\"\" width=\"50\" />\r\n                        <div class=\"mr-auto ml-2\">\r\n                            <p class=\"user-name\">{{ ref.name }}</p>\r\n                            <small class=\"user-date\">{{\r\n                                formatDate(ref.created_at)\r\n                            }}</small>\r\n                        </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"alert alert-info mt-4\" v-else>\r\n                        <small style=\"font-size: 14px\">No referred users</small>\r\n                    </div>\r\n                </div>\r\n            </ion-card>\r\n        </div>\r\n      </BaseLayout>\r\n    </ion-page>\r\n</template>\r\n\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport  { IonCard, IonPage } from '@ionic/vue'\r\nimport BaseLayout from '@/components/BaseLayout'\r\nimport axios from \"axios\";\r\nimport { mapActions, mapGetters } from 'vuex'\r\nimport moment from 'moment';\r\nimport { copyText } from 'vue3-clipboard'\r\n\r\nexport default defineComponent({\r\n    name: 'Account',\r\n    components: {\r\n        IonCard,\r\n        BaseLayout,\r\n        IonPage,\r\n    },\r\n    data() {\r\n        return {\r\n            referred: {},\r\n        }\r\n    },\r\n    computed: mapGetters([\"auth_token\", \"auth_user\"]),\r\n    mounted() {\r\n      this.fetchReferredUsers();\r\n    },\r\n    methods: {\r\n        ...mapActions(['getAuthData']),\r\n        fetchReferredUsers() {\r\n            const userId = this.$store.state.user.id;\r\n            this.loading = true;\r\n            axios\r\n                .get(this.dynamic_auth_route(\"user/referred/fetch/\" + userId), {\r\n                headers: {\r\n                    authorization: `Bearer ${this.auth_token}`,\r\n                },\r\n                })\r\n                .then((res) => {\r\n                this.referred = res.data;\r\n                })\r\n                .catch((error) => {\r\n                this.tokenExpired(error);\r\n                })\r\n                .finally(() => {\r\n                this.loading = false;\r\n                });\r\n        },\r\n        formatDate(date) {\r\n            return moment(date).format(\"D-MM-YYYY\");\r\n        },\r\n        doCopy() {\r\n            const text = this.auth_user.referral_link\r\n            copyText(text, undefined, (error) => {\r\n                if (error) {\r\n                    this.openToast(\" cannot copy referral link\", \"danger\");\r\n                } else {\r\n                    this.openToast(\"Referral Link Copied to clipboard\", \"success\");\r\n                }\r\n            })\r\n        },\r\n    },\r\n})\r\n</script>\r\n<style scoped>\r\n.refer {\r\n    margin-top: 20px;\r\n}\r\n.ref-link {\r\n  white-space: nowrap;\r\n  overflow: hidden;\r\n  margin: 5px 10px 5px 5px;\r\n  text-align: left !important;\r\n}\r\n.refer-content h2 {\r\n  color: #4c1c80;\r\n  font-weight: 500;\r\n  font-size: 40px;\r\n  margin-bottom: 15px !important;\r\n  margin-top: 0 !important\r\n}\r\n.refer-content p {\r\n    color: #222222;\r\n    font-size: 15px;\r\n    line-height: 1.5;\r\n}\r\n.refer-prize {\r\n  font-weight: 700;\r\n  font-size: 20px;\r\n  color: green;\r\n}\r\n.reffered {\r\n  border: 1px solid #e0e0e0;\r\n  padding: 10px 15px;\r\n  border-radius: 5px;\r\n  box-shadow: 0 0 1px 1px hsl(0deg 0% 0% / 5%);\r\n}\r\n.user-name {\r\n  margin-bottom: 0 !important;\r\n  font-size: 14px;\r\n  margin-top: 1px !important;\r\n  font-weight: 600;\r\n  color: #333333;\r\n}\r\n.user-date {\r\n  font-size: 12px;\r\n  color: #777777;\r\n}\r\n.overview {\r\n  color: #333333;\r\n  margin-top: 10px !important;\r\n  margin-bottom: 25px !important;\r\n}\r\n</style>\r\n"],"sourceRoot":""}]}