{"remainingRequest":"/Users/davismac/Documents/marketcentamobile/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/davismac/Documents/marketcentamobile/src/components/UpgradePlan.vue?vue&type=style&index=0&id=01f52ee5&scoped=true&lang=css","dependencies":[{"path":"/Users/davismac/Documents/marketcentamobile/src/components/UpgradePlan.vue","mtime":1643183851000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/vue-loader-v16/dist/stylePostLoader.js","mtime":499162500000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouYWRkLWFkZHJlc3Mgew0KICBmb250LXNpemU6IDEzcHggIWltcG9ydGFudDsNCiAgZm9udC13ZWlnaHQ6IDYwMDsNCiAgY29sb3I6ICNmMjZiMzE7DQp9DQouYWRkLWFkZHJlc3M6aG92ZXIgew0KICBjb2xvcjogI2ZmZmZmZiAhaW1wb3J0YW50Ow0KfQ0KLmJnLWFkZHJlc3Mgew0KICBib3JkZXItcmFkaXVzOiA0cHg7DQogIGJvcmRlcjogMXB4IHNvbGlkICNlZGVkZWQ7DQogIHBhZGRpbmc6IDhweCAxNXB4IDhweCAxcHg7DQogIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDsNCn0NCi5hZGRyZXNzLWNvbnRlbnR7DQogICAgd2lkdGg6IDE2NXB4Ow0KICAgIHdoaXRlLXNwYWNlOiBub3JtYWwgIWltcG9ydGFudDsNCn0NCi5hZGRyZXNzLWNvbnRlbnQgaDUgew0KICBmb250LXNpemU6IDE4cHg7DQogIGZvbnQtd2VpZ2h0OiA1MDA7DQogIGxpbmUtaGVpZ2h0OiAxLjg7DQp9DQouYWRkcmVzcy1jb250ZW50IGg2IHsNCiAgZm9udC1zaXplOiAxNnB4Ow0KICBmb250LXdlaWdodDogNDUwOw0KICBsaW5lLWhlaWdodDogMi4wOw0KfQ0KLmFkZHJlc3MtY29udGVudCBwIHsNCiAgZm9udC1zaXplOiAxNHB4Ow0KICBsaW5lLWhlaWdodDogMS42ICFpbXBvcnRhbnQ7DQp9DQouYm9yZGVyLW5vbmUgew0KICAgIC0tYm9yZGVyLWNvbG9yOiB0cmFuc3BhcmVudCAhaW1wb3J0YW50Ow0KfQ0KLm9yZGVyLWJ0biB7DQogICAgcGFkZGluZzogMjBweCAxMHB4IDIwcHg7DQp9DQo="},{"version":3,"sources":["/Users/davismac/Documents/marketcentamobile/src/components/UpgradePlan.vue"],"names":[],"mappings":"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","file":"/Users/davismac/Documents/marketcentamobile/src/components/UpgradePlan.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <ion-content>\r\n    <ion-header>\r\n        <ion-toolbar>\r\n            <ion-title>{{ title }}</ion-title>\r\n            <ion-buttons slot=\"end\">\r\n                <ion-button color=\"dark\" @click=\"dismissModal\">\r\n                    <ion-icon slot=\"icon-only\" :icon=\"closeOutline\"></ion-icon>\r\n                </ion-button>\r\n            </ion-buttons>\r\n        </ion-toolbar>\r\n    </ion-header>\r\n    <div class=\"d-flex ion-padding mb-3\">\r\n      <h5 style=\"margin-bottom: 0 !important\">Membership Plans</h5>\r\n    </div>\r\n    <div>\r\n      <div v-if=\"plans.length\">\r\n        <div v-for=\"(plan, index) in plans\" :key=\"index\">\r\n            <div class=\"bg-address\">\r\n                <div class=\"d-flex\">\r\n                    <ion-list>\r\n                        <ion-radio-group v-model=\"selectedPlan\">\r\n                            <ion-item class=\"border-none\">\r\n                                <ion-label class=\"address-content\">\r\n                                    <h5>{{ plan.name }}</h5>\r\n                                    <h6>&#8358;{{ Number(plan.amount).toLocaleString() }}</h6>\r\n                                    <div class=\"alert alert-info py-1\">\r\n                                        <!-- <i class=\"mdi mdi-information mr-2\"></i> -->\r\n                                        <p style=\"font-size: 12px\" class=\"ml-auto\">\r\n                                            30 days payback on <br />\r\n                                            credit purchases\r\n                                        </p>\r\n                                    </div>\r\n                                </ion-label>\r\n                                <ion-radio slot=\"start\" :value=\"plan\" :checked=\"plan == selectedPlan\"></ion-radio>\r\n                            </ion-item>\r\n                        </ion-radio-group>\r\n                    </ion-list>\r\n                    <div class=\"ml-auto\">\r\n                        <img\r\n                            :src=\"plan.subscription_image\"\r\n                            alt=\"\"\r\n                            width=\"80\"\r\n                            height=\"80\"\r\n                            class=\"img-fluid\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"order-btn\">\r\n            <ion-button\r\n                class=\"mb-3\"\r\n                color=\"primary\"\r\n                expand=\"block\"\r\n                @click=\"subscribe\"\r\n            >\r\n                SELECT PLAN\r\n            </ion-button>\r\n            <ion-button type=\"button\" style=\"margin-top: 15px\" color=\"light\" @click=\"dismissModal\" expand=\"block\">\r\n                CANCEL\r\n            </ion-button>\r\n        </div>\r\n      </div>\r\n      <div v-else class=\"alert alert-info\" style=\"margin: 10px\">\r\n        <h6>No Subscription plans created yet</h6>\r\n      </div>\r\n    </div>\r\n  </ion-content>\r\n</template>\r\n<script>\r\nimport { defineComponent } from 'vue'\r\nimport  { IonItem, IonHeader, IonToolbar, IonTitle, IonList,\r\nIonLabel, IonButton, IonButtons, IonRadio, IonRadioGroup, IonContent, IonIcon } from '@ionic/vue'\r\nimport { closeOutline } from 'ionicons/icons';\r\nimport { modalController } from \"@ionic/vue\";\r\nimport axios from \"axios\";\r\nimport { mapActions, mapGetters } from \"vuex\";\r\nexport default defineComponent({\r\n  components: {\r\n    IonItem,\r\n    IonHeader,\r\n    IonToolbar,\r\n    IonTitle,\r\n    IonLabel,\r\n    IonButton,\r\n    IonButtons,\r\n    IonRadioGroup,\r\n    IonRadio, \r\n    IonList,\r\n    IonContent,\r\n    IonIcon\r\n  },\r\n  props: {\r\n      title: String,\r\n      membership: Object\r\n  },\r\n  computed: mapGetters([\"auth_token\"]),\r\n  data() {\r\n    return {\r\n      plans: {},\r\n      selectedPlan: this.membership,\r\n      closeOutline\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getAuthData();\r\n    this.fetchPlans();\r\n  },\r\n  methods: {\r\n    ...mapActions([\"getAuthData\"]),\r\n    fetchPlans() {\r\n      this.presentLoading('Loading');\r\n      axios\r\n        .get(this.dynamic_auth_route(\"membership/plans/fetch\"), {\r\n          headers: {\r\n            authorization: `Bearer ${this.auth_token}`,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          this.plans = res.data;\r\n        })\r\n        .catch((error) => {\r\n            this.openToast(\"An error occured. Please, try again.\", 'danger');\r\n            this.tokenExpired(error);\r\n        })\r\n        .finally(() => {\r\n          this.dismissLoading();\r\n        });\r\n    },\r\n    subscribe() {\r\n      let ref = Math.random().toString(36).substr(2, 6);\r\n      const userId = this.$store.state.user.id;\r\n      const route = this.dynamic_auth_route(\"membership/payment/verify\");\r\n      const planID = this.selectedPlan.id;\r\n      let amount = 0;\r\n      if (this.membership != \"\") {\r\n        amount = Math.abs(this.selectedPlan.amount - this.membership.amount);\r\n      } else {\r\n        amount = this.selectedPlan.amount;\r\n      }\r\n\r\n      if (\r\n        this.membership != \"\" &&\r\n        this.membership.amount > this.selectedPlan.amount\r\n      ) {\r\n          this.openToast(\"You cannot downgrade subscription plan.\", 'danger');\r\n            return;\r\n      }\r\n      const header = {\r\n        headers: {\r\n          authorization: `Bearer ${this.auth_token}`,\r\n        },\r\n      };\r\n      // eslint-disable-next-line no-undef\r\n      FlutterwaveCheckout({\r\n        public_key: \"FLWPUBK-049a53774a1dd9ca29dd26a6d3c23fa4-X\",\r\n        tx_ref: ref,\r\n        amount: amount,\r\n        currency: \"NGN\",\r\n        country: \"NG\",\r\n        payment_options: \" \",\r\n        customer: {\r\n          email: this.$store.state.user.email,\r\n          phone_number: this.$store.state.user.phone,\r\n          name: this.$store.state.user.name,\r\n        },\r\n        callback: function (data) {\r\n          // specified callback function\r\n          let form = new FormData();\r\n          form.append(\"transRef\", data.transaction_id);\r\n          form.append(\"userId\", userId);\r\n          form.append(\"subscriptionId\", planID);\r\n          axios\r\n            .post(route, form, header)\r\n            .then(() => {\r\n              location.reload();\r\n            })\r\n            .catch((error) => {\r\n              this.tokenExpired(error);\r\n            });\r\n        },\r\n        customizations: {\r\n          title: \"Marketcenta\",\r\n          description: \"Membership Subscription\",\r\n          logo: \"https://res.cloudinary.com/adetayoapplication/image/upload/v1636387496/marketlogosm_e7obw7.png\",\r\n        },\r\n      });\r\n    },\r\n    async dismissModal() {\r\n        await modalController.dismiss();\r\n    }\r\n  },\r\n});\r\n</script>\r\n<style scoped>\r\n.add-address {\r\n  font-size: 13px !important;\r\n  font-weight: 600;\r\n  color: #f26b31;\r\n}\r\n.add-address:hover {\r\n  color: #ffffff !important;\r\n}\r\n.bg-address {\r\n  border-radius: 4px;\r\n  border: 1px solid #ededed;\r\n  padding: 8px 15px 8px 1px;\r\n  word-break: break-all;\r\n}\r\n.address-content{\r\n    width: 165px;\r\n    white-space: normal !important;\r\n}\r\n.address-content h5 {\r\n  font-size: 18px;\r\n  font-weight: 500;\r\n  line-height: 1.8;\r\n}\r\n.address-content h6 {\r\n  font-size: 16px;\r\n  font-weight: 450;\r\n  line-height: 2.0;\r\n}\r\n.address-content p {\r\n  font-size: 14px;\r\n  line-height: 1.6 !important;\r\n}\r\n.border-none {\r\n    --border-color: transparent !important;\r\n}\r\n.order-btn {\r\n    padding: 20px 10px 20px;\r\n}\r\n</style>\r\n"]}]}