{"remainingRequest":"/Users/davismac/Documents/marketcentamobile/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/davismac/Documents/marketcentamobile/src/App.vue?vue&type=template&id=7ba5bd90","dependencies":[{"path":"/Users/davismac/Documents/marketcentamobile/src/App.vue","mtime":1642922914000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":499162500000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/davismac/Documents/marketcentamobile/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgPGlvbi1hcHA+CiAgICAgIDxkaXYgdi1pZj0ic2hvdyI+CiAgICAgICAgPFN0YXJ0UGFnZSB2LWlmPSJzaG93IiBAY2xvc2Utc3RhcnQtcGFnZT0ic2V0U2hvdyIgLz4KICAgICAgPC9kaXY+CiAgICAgIDxTaWRlQmFyIHYtZWxzZT4KICAgICAgICA8aW9uLXJvdXRlci1vdXRsZXQgaWQ9Im1haW4tY29udGVudCI+PC9pb24tcm91dGVyLW91dGxldD4KICAgICAgPC9TaWRlQmFyPgogIDwvaW9uLWFwcD4K"},{"version":3,"sources":["/Users/davismac/Documents/marketcentamobile/src/App.vue"],"names":[],"mappings":";EACE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MACJ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACd,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;MACtD,CAAC,CAAC,CAAC,CAAC,CAAC;MACL,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;MAC1D,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/Users/davismac/Documents/marketcentamobile/src/App.vue","sourceRoot":"","sourcesContent":["<template>\n  <ion-app>\n      <div v-if=\"show\">\n        <StartPage v-if=\"show\" @close-start-page=\"setShow\" />\n      </div>\n      <SideBar v-else>\n        <ion-router-outlet id=\"main-content\"></ion-router-outlet>\n      </SideBar>\n  </ion-app>\n</template>\n\n<script>\nimport { \n  IonApp, IonRouterOutlet} from '@ionic/vue';\nimport { defineComponent } from 'vue';\nimport SideBar from '@/components/SideBar'\nimport { PushNotifications } from '@capacitor/push-notifications';\nimport { mapActions, mapGetters } from \"vuex\";\nimport StartPage from '@/components/StartPage'\nimport axios from \"axios\";\n\nexport default defineComponent({\n  name: 'App',\n  components: {\n    IonApp,\n    IonRouterOutlet,\n    SideBar,\n    StartPage,\n  },\n  data() {\n    return {\n      // fcm: new FCM()\n      show: true,\n    }\n  },\n  computed: mapGetters([\"auth_token\", \"auth_user\"]),\n  mounted() {\n    this.getAuthData();\n    this.checkStatus()\n    setInterval(() => {\n      this.checkUnpaidCredit();\n    }, 300000);\n    // Request permission to use push notifications\n    // iOS will prompt user and return if they granted permission or not\n    // Android will just grant without prompting\n    PushNotifications.requestPermission().then(result => {\n      console.log('result ' + JSON.stringify(result));\n      // Initialize the registration with FCM Token\n      PushNotifications.register();\n    });\n\n    // Add registration error if there are.\n    PushNotifications.addListener(\"registrationError\", (error) => {\n      console.log(`error on register ${JSON.stringify(error)}`);\n    }),\n    \n    // Add Notification received\n    PushNotifications.addListener(\n      \"pushNotificationReceived\",\n      (notification) => {\n        console.log(`notification ${JSON.stringify(notification)}`);\n      }\n    ),\n              \n    // Add Action performed\n    PushNotifications.addListener(\n      \"pushNotificationActionPerformed\",\n      async (notification) => {\n          // alert(\"notification \" + notification)\n        console.log(notification.notification.data);\n      }\n    ),\n            \n    // On registration we can get the token\n    PushNotifications.addListener('registration', (token) => {\n      console.log('Push registration success, token: ' + token.value);\n      //TODO: store token server side?\n    });\n  },\n  methods: {\n    ...mapActions([\"getAuthData\"]),\n    checkUnpaidCredit() {\n      axios\n        .post(\n          this.dynamic_route(\"products/orders/credit/check_payment\"),\n          { userId: this.auth_user.id },\n          {\n            headers: {\n              authorization: `Bearer ${this.auth_token}`,\n            },\n          }\n        )\n        .then((res) => {\n          this.creditOrders = res.data;\n        })\n        .catch((error) => {\n          this.tokenExpired(error);\n        });\n    },\n    checkStatus() {\n      const showStatus = localStorage.getItem('showStatus');\n      if(!showStatus || showStatus == false) {\n        this.show = true\n      } else {\n        this.show = false\n      }\n    },\n    setShow() {\n      localStorage.setItem('showStatus', false)\n      this.show = false\n    }\n  }\n});\n</script>\n<style scoped>\n\n</style>"]}]}